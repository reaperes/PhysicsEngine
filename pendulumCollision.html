<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <title>Next PhysicsEngine (mini) - Pendulum</title>
  <script type="text/javascript" src="bin/npengine.dev.js"></script>
  <script type="text/javascript" src="lib/dat.gui.min.js"></script>
</head>
<body>
<script type="text/javascript">
  var engine = new NPEngine;
  var pendulumCollision = new NPEngine.PendulumCollision;
  engine.addDisplayObject(pendulumCollision);
  engine.ready();

  // control module
  var controlBox = function () {
    this.gravity = 9.8;
    this.k = 1000000;
    this.mu = 10;
    this.diameter1 = 0.1;
    this.diameter2 = 0.1;
    this.angle1 = 0;
    this.angle2 = 45;
  };

  window.onload = function () {
    var box = new controlBox();
    var gui = new dat.GUI();

    var gravity = gui.add(box, 'gravity', 1, 10);
    gravity.onChange(function (value) {
      engine.stop();
      pendulumCollision.setGravity(value);
      engine.ready();
    });

    var k = gui.add(box, 'k', 10000, 10000000);
    k.onChange(function (value) {
      engine.stop();
      pendulumCollision.setK(Math.round(value));
      engine.ready();
    });

    var mu = gui.add(box, 'mu', 0, 300);
    mu.onChange(function (value) {
      engine.stop();
      pendulumCollision.setMu(Math.round(value));
      engine.ready();
    });

    var diameter1 = gui.add(box, 'diameter1', 0, 1);
    diameter1.onChange(function (value) {
      engine.stop();
      pendulumCollision.setDiameter1(value);
      engine.ready();
    });

    var diameter2 = gui.add(box, 'diameter2', 0, 1);
    diameter2.onChange(function (value) {
      engine.stop();
      pendulumCollision.setDiameter2(value);
      engine.ready();
    });

    var angle1 = gui.add(box, 'angle1', -90, 0);
    angle1.onChange(function (value) {
      engine.stop();
      pendulumCollision.setAngle1(value);
      engine.ready();
    });

    var angle2 = gui.add(box, 'angle2', 0, 90);
    angle2.onChange(function (value) {
      engine.stop();
      pendulumCollision.setAngle2(value);
      engine.ready();
    });
  }
</script>
</body>
</html>