<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <title>Next PhysicsEngine (mini) - Spring</title>
  <script type="text/javascript" src="bin/npengine.dev.js"></script>
  <script type="text/javascript" src="lib/dat.gui.min.js"></script>
</head>
<body>
<script type="text/javascript">
  var engine = new NPEngine;
  var grid = new NPEngine.Grid;
  var collision = new NPEngine.Collision2d;
  engine.setGrid(grid);
  engine.addDisplayObject(collision);
  engine.ready();

  // control module
  var DefaultValue = function () {
    this.mass1 = 2;
    this.mass2 = 2;
    this.k = 10000;
    this.mu = 50;
    this.diameter1 = 1;
    this.diameter2 = 1;
    this.ball1_x = -1;
    this.ball1_y = 1;
    this.ball2_x = 1;
    this.ball2_y = 0;
    this.velocity1_x = 1;
    this.velocity1_y = 0;
    this.velocity2_x = 0;
    this.velocity2_y = 0;
  };

  window.onload = function () {
    var defaultValue = new DefaultValue();
    var gui = new dat.GUI();

    var massFolder = gui.addFolder('질량 (Kg)');
    massFolder.open();
    var mass1 = massFolder.add(defaultValue, 'mass1');
    mass1.onChange(function (value) {
      engine.stop();
      collision.setMass1(Math.round(value));
      engine.ready();
    });

    var mass2 = massFolder.add(defaultValue, 'mass2');
    mass2.onChange(function (value) {
      engine.stop();
      collision.setMass2(Math.round(value));
      engine.ready();
    });

    var kFolder = gui.addFolder('K (N/m)');
    kFolder.open();
    var k = kFolder.add(defaultValue, 'k');
    k.onChange(function (value) {
      engine.stop();
      collision.setK(Math.round(value));
      engine.ready();
    });

    var muFolder = gui.addFolder('Mu (N*s/m)');
    muFolder.open();
    var mu = muFolder.add(defaultValue, 'mu');
    mu.onChange(function (value) {
      engine.stop();
      collision.setMu(Math.round(value));
      engine.ready();
    });

    var diameterFolder = gui.addFolder('지름 (m)');
    diameterFolder.open();
    var diameter1 = diameterFolder.add(defaultValue, 'diameter1');
    diameter1.onChange(function (value) {
      engine.stop();
      collision.setDiameter1(value);
      engine.ready();
    });

    var diameter2 = diameterFolder.add(defaultValue, 'diameter2');
    diameter2.onChange(function (value) {
      engine.stop();
      collision.setDiameter2(value);
      engine.ready();
    });

    var positionFolder = gui.addFolder('공의 초기 위치 (m)');
    positionFolder.open();
    var ball1_x = positionFolder.add(defaultValue, 'ball1_x');
    ball1_x.onChange(function (value) {
      engine.stop();
      collision.setBall1_x(value);
      engine.ready();
    });

    var ball1_y = positionFolder.add(defaultValue, 'ball1_y');
    ball1_y.onChange(function (value) {
      engine.stop();
      collision.setBall1_y(value);
      engine.ready();
    });

    var ball2_x = positionFolder.add(defaultValue, 'ball2_x');
    ball2_x.onChange(function (value) {
      engine.stop();
      collision.setBall2_x(value);
      engine.ready();
    });

    var ball2_y = positionFolder.add(defaultValue, 'ball2_y');
    ball2_y.onChange(function (value) {
      engine.stop();
      collision.setBall2_y(value);
      engine.ready();
    });

    var velocityFolder = gui.addFolder('공의 초기 속도 (m/s)');
    velocityFolder.open();
    var velocity1_x = velocityFolder.add(defaultValue, 'velocity1_x');
    velocity1_x.onChange(function (value) {
      engine.stop();
      collision.setVelocity1_x(value);
      engine.ready();
    });

    var velocity1_y = velocityFolder.add(defaultValue, 'velocity1_y');
    velocity1_y.onChange(function (value) {
      engine.stop();
      collision.setVelocity1_y(value);
      engine.ready();
    });

    var velocity2_x = velocityFolder.add(defaultValue, 'velocity2_x');
    velocity2_x.onChange(function (value) {
      engine.stop();
      collision.setVelocity2_x(value);
      engine.ready();
    });

    var velocity2_y = velocityFolder.add(defaultValue, 'velocity2_y');
    velocity2_y.onChange(function (value) {
      engine.stop();
      collision.setVelocity2_y(value);
      engine.ready();
    });
  };
</script>
</body>
</html>