<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <title>Next PhysicsEngine (mini) - Pendulum</title>
  <script type="text/javascript" src="bin/npengine.dev.js"></script>
  <script type="text/javascript" src="lib/dat.gui.min.js"></script>
</head>
<body>
<script type="text/javascript">
  var engine = new NPEngine;
  var pendulum = new NPEngine.Pendulum;
  engine.addDisplayObject(pendulum);

  requestAnimationFrame(animate);
  function animate() {
    requestAnimationFrame(animate);
    engine.render();
  }



  var controlBox = function () {
    this.fps = true;
    this.mass = 10;
    this.length = 5;
    this.theta0 = 0.785398;
    this.ΔdeltaT = 0.01;
    this.restart = function () {
      engine.stop();
      pendulum.compute();
      engine.start();
    };
  };

  window.onload = function () {
    var control = new controlBox();
    var gui = new dat.GUI();
    var fps = gui.add(control, 'fps');
    fps.onFinishChange(function (value) {
      engine.setDebug(value);
    });

    var mass = gui.add(control, 'mass', 1, 100);
    mass.onChange(function (value) {
      engine.stop();
      pendulum.setMass(Math.round(value));
    });

    var length = gui.add(control, 'length', 1, 10);
    length.onChange(function (value) {
      engine.stop();
      pendulum.setLength(Math.round(value));
    });

    var theta0 = gui.add(control, 'theta0', -90, 90);
    theta0.onChange(function (value) {
      engine.stop();
      pendulum.setTheta0(Math.round(value));
    });

    var ΔdeltaT = gui.add(control, 'ΔdeltaT', 0.01, 0.1);
    ΔdeltaT.onChange(function (value) {
      engine.stop();
      pendulum.setDeltaT(value);
    });

    gui.add(control, 'restart');
  };
</script>
</body>
</html>