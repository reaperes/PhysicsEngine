<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <title>Next PhysicsEngine (mini) - Spring</title>
  <script type="text/javascript" src="bin/npengine.dev.js"></script>
  <script type="text/javascript" src="lib/dat.gui.min.js"></script>
</head>
<body>
<script type="text/javascript">
  var engine = new NPEngine;
  var grid = new NPEngine.Grid;
  var spring = new NPEngine.Spring;
  engine.setGrid(grid);
  engine.addDisplayObject(spring);
  engine.ready();

  // default value
  var DefaultValue = function () {
    this.mass = 2;
    this.k = 100;
    this.gravity = 9.8;
    this.mu = 3;
    this.x = 1;
    this.velocity = 0;
  };

  window.onload = function () {
    var defaultValue = new DefaultValue();
    var gui = new dat.GUI();

    var massFolder = gui.addFolder('질량 (kg)');
    massFolder.open();
    var mass = massFolder.add(defaultValue, 'mass');
    mass.onChange(function (value) {
      engine.stop();
      spring.setMass(value);
      engine.ready();
    });

    var kFolder = gui.addFolder('k (N/m)');
    kFolder.open();
    var k = kFolder.add(defaultValue, 'k');
    k.onChange(function (value) {
      engine.stop();
      spring.setK(value);
      engine.ready();
    });

    var gravityFolder = gui.addFolder('중력 (m/s^2)');
    gravityFolder.open();
    var gravity = gravityFolder.add(defaultValue, 'gravity');
    gravity.onChange(function (value) {
      engine.stop();
      spring.setGravity(value);
      engine.ready();
    });

    var muFolder = gui.addFolder('Mu (N s/m)');
    muFolder.open();
    var mu = muFolder.add(defaultValue, 'mu');
    mu.onChange(function (value) {
      engine.stop();
      spring.setMu(value);
      engine.ready();
    });

    var xFolder = gui.addFolder('초기 위치 (m)');
    xFolder.open();
    var x = xFolder.add(defaultValue, 'x');
    x.onChange(function (value) {
      engine.stop();
      spring.setX(value);
      engine.ready();
    });

    var velocityFolder = gui.addFolder('초기 속도 (m/s)');
    velocityFolder.open();
    var velocity = velocityFolder.add(defaultValue, 'velocity');
    velocity.onChange(function (value) {
      engine.stop();
      spring.setVelocity(value);
      engine.ready();
    });
  }
</script>
</body>
</html>